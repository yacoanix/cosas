<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>LanzaMonedas</title>
	<script language="javascript">
	function corrigeImagen(){
		document.getElementById("imagen").src="img/nada.jpg";
		document.getElementById("cara").src="img/cara.jpg";
		document.getElementById("cruz").src="img/cruz.jpg";
		document.getElementById("wins").innerHTML = "<b>Ganadas:</b> "+ganadas+"   <b>Perdidas:</b> "+perdidas;
	}
	</script>
</head>
<body onload="corrigeImagen();">
     <script language="javascript">
		var monedaelegida=0;
		var monedas=["img/cruz.jpg","img/cara.jpg"];
		var nombremon=["cruz","cara"];
		var aleatorio;
		var caramoneda=0;
		var ganadas=0;
		var perdidas=0;
		var hacerfunc=true;
		function reinicio(){
			document.getElementById("oculto").style.display = 'none';
			document.getElementById("imagen").src="img/nada.jpg";
			document.getElementById("cara").src="img/cara.jpg";
			document.getElementById("cruz").src="img/cruz.jpg";
			var aleatorio=Math.round(Math.random());
			var count=0;
			document.getElementById("salida").innerHTML = "";
			document.getElementById("mensaje").innerHTML = "";
			hacerfunc=true;
		}
		
		function randommoneda(monedatuya){
		aleatorio=Math.round(Math.random());
		var count=0;
		var hola=setInterval(function(){
			if(caramoneda==1){
				document.getElementById("imagen").src=monedas[caramoneda];
				caramoneda=0;
			} else{
				document.getElementById("imagen").src=monedas[caramoneda];
				caramoneda=1;
			}
			count++;
			if(count >= 20) {
				clearInterval(hola);
				document.getElementById("imagen").src=monedas[aleatorio];
				comprueba(monedatuya);
			}
			}, 150);
		}
		
		function funcion(caraeleg){
		if(hacerfunc==true){
		if (caraeleg==1){
		document.getElementById("cruz").src="img/nada.jpg";
		document.getElementById("cara").src="img/cara.jpg";
		
		alert("Has elegido cara");
		} else if (caraeleg==0){
		document.getElementById("cara").src="img/nada.jpg";
		document.getElementById("cruz").src="img/cruz.jpg";
		
		alert("Has elegido cruz");
		} 

		document.getElementById("salida").innerHTML = "La moneda salida es:";
		randommoneda(caraeleg);
		hacerfunc=false;
		}
		}
		
		function comprueba(monedaeleg){
		if(aleatorio == monedaeleg){
			document.getElementById("salida").innerHTML = "La moneda salida es: "+ nombremon[aleatorio];
			document.getElementById("mensaje").innerHTML = "<b>HAS GANADO</b>";
			document.getElementById("oculto").style.display = 'block';
			ganadas++;
			document.getElementById("wins").innerHTML = "<b>Ganadas:</b> "+ganadas+"   <b>Perdidas:</b> "+perdidas;
		} else{
			document.getElementById("salida").innerHTML = "La moneda salida es: "+ nombremon[aleatorio];
			document.getElementById("mensaje").innerHTML = "<b>HAS PERDIDO</b>";
			document.getElementById("oculto").style.display = 'block';
			perdidas++;
			document.getElementById("wins").innerHTML = "Ganadas: "+ganadas+"   Perdidas: "+perdidas;
		}
		}
     </script>

	 <h1 align="center">ELIGE UNA OPCION</h1>
	 <p id="wins" align="center"></p>
	 <p align="center">Selecciona la imagen para elegir la cara de la moneda que desees: </p>
	 <div style="width:49%;heigth:400px;text-align:center;float:left;border:1px solid;">
	 <br>
	 <img src="" id="cruz"
				alt="cruz" onclick="funcion(0);" style="height: 200px;width: 200px;margin-top: 11px;"/>
	<br><br>
	 </div>
	 <div style="width:50%;heigth:400px;text-align:center;float:left;border:1px solid;">
	 <br>
	 
	 <img src="" id="cara"
				alt="cara" onclick="funcion(1);" style="height: 200px;width: 200px;margin-top: 11px;"/>
	<br><br>
	 </div>
	 <div align="center" style="text-align:center;float:left;width:100%">
	 <p id="salida" style="margin-top:20px"></p>
	 <img src="" id="imagen"
				alt="aleatorio" style="height: 150px;width: 150px;margin-top: 11px;"/>
	<br>
	 </div>
	 <div id="oculto" align="center" style="text-align:center;float:left;width:100%;display:none;">
	 <p id="mensaje"></p>	
	 <input type="button" value="Tirar de nuevo" name="iniciador" id="a" onclick="reinicio();" />
	 <br><br><br><br>
	 </div>
</body>
</html>